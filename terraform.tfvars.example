# Terraform Variables Example
# Copy this file to terraform.tfvars and fill in your values
# cp terraform.tfvars.example terraform.tfvars

# =============================================================================
# Proxmox Configuration
# =============================================================================

proxmox_api_url          = "https://192.168.0.7:8006/api2/json"
proxmox_api_token_id     = "terraform@pam!terraform"
proxmox_api_token_secret = "your-api-token-secret-here"
# proxmox_password       = "alternative-to-api-token"  # Use token or password, not both

# =============================================================================
# VM Network Configuration
# =============================================================================

control_plane_ip = "192.168.0.32"
worker_ips       = ["192.168.0.33", "192.168.0.34"]
worker_names     = ["bumblebee", "wheeljack"]
vm_gateway       = "192.168.0.1"

# =============================================================================
# SSH Configuration
# =============================================================================

ssh_user             = "ubuntu"  # or your VM username
ssh_private_key_path = "~/.ssh/id_rsa"

# =============================================================================
# Kubernetes Configuration
# =============================================================================

k8s_version        = "1.28"
pod_network_cidr   = "10.244.0.0/16"
service_cidr       = "10.96.0.0/12"
bootstrap_cluster  = true  # Set to false if cluster already exists

# =============================================================================
# MetalLB Load Balancer Configuration
# =============================================================================

metallb_pool_start = "192.168.0.35"
metallb_pool_end   = "192.168.0.45"
ingress_ip         = "192.168.0.35"  # Must be in MetalLB pool
syslog_ip          = "192.168.0.36"  # For OPNsense logs (must be in MetalLB pool)

# =============================================================================
# NFS Storage Configuration
# =============================================================================

nfs_storage_server         = "192.168.0.7"
nfs_storage_path           = "/data/kubernetes"
nfs_server_ip              = "192.168.0.7"
nfs_backup_path            = "/data/kubernetes/backups"
nfs_ssh_user               = "nfs-user"  # SSH user for NFS server (if different from ssh_user)
nfs_ssh_private_key_path   = "~/.ssh/id_rsa"  # SSH key for NFS server (if different from ssh_private_key_path)

# =============================================================================
# Backup Configuration
# =============================================================================

backup_retention_days = 30

# =============================================================================
# Docker Hub Configuration (for private images)
# =============================================================================

# dockerhub_username = "your-dockerhub-username"
# dockerhub_password = "your-dockerhub-password"
# dockerhub_email    = "your-email@example.com"

# =============================================================================
# DNS/Ingress Configuration
# =============================================================================

grafana_host    = "grafana.home"
prometheus_host = "prometheus.home"
loki_host       = "loki.home"
mimir_host      = "mimir.home"
mylar_host      = "mylar.home"

# =============================================================================
# VM Resource Configuration (Optional - defaults provided)
# =============================================================================

# vm_memory              = 4096      # MB per worker node
# vm_cores               = 2         # CPU cores per worker node
# vm_disk_size           = "256"     # GB per VM
# control_plane_memory   = 4096      # MB for control plane
# control_plane_cores    = 2         # CPU cores for control plane

# =============================================================================
# Notes:
# =============================================================================
# 
# 1. Proxmox API Token:
#    - Create in Proxmox UI: Datacenter → Permissions → API Tokens
#    - Token needs PVEVMAdmin role
#
# 2. Network Configuration:
#    - All IPs must be on the same subnet
#    - MetalLB pool should not overlap with DHCP range
#    - Reserve IPs in your router for static assignments
#
# 3. NFS Server:
#    - Must be accessible from all Kubernetes nodes
#    - Export path must exist and have proper permissions
#    - Test with: showmount -e <nfs_server_ip>
#
# 4. SSH Keys:
#    - Public key should be in VM cloud-init or authorized_keys
#    - Private key path should be readable by Terraform
#
# 5. Service Access:
#    - Grafana:     http://grafana.home      (admin/admin)
#    - Prometheus:  http://prometheus.home
#    - Loki:        http://loki.home
#    - Mimir:       http://mimir.home
#    - Mylar:       http://mylar.home
#    - N8N:         http://automate.home     (admin/automate)
#
# 6. OPNsense Logging:
#    - Configure OPNsense to send syslog to: 192.168.0.36:514
#    - See docs/OPNSENSE_LOGGING.md for details

